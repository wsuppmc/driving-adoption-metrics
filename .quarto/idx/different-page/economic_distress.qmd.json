{"title":"Economic Distress Index","markdown":{"yaml":{"title":"Economic Distress Index","description":"A county-level measure of economic distress based on seven indicators.","toc":false,"author":"Nigel Soria","badges":true,"categories":["census","acs","economic distress","counties"],"permalink":"/distress-index/","image":"images/ks-edi.png"},"headingText":"Methodology","containsRefs":false,"markdown":"\n\n\nThe index combines seven indicators into a single, comparative measure of economic well-being. The index is constructed from the U.S. Census Bureau's American Community Survey (ACS) 5-Year Estimates and County Business Patterns (CBP) datasets.\n\nThe seven components of the index are:\n\n-   no high school diploma---percent of the population 25 years of age and older without a high school diploma or equivalent;\n\n-   housing vacancy rate---percent of habitable housing that is unoccupied, excluding properties that are for seasonal, recreational, or occasional use;\n\n-   unemployment rate---the number of unemployed people as a fraction of the labor force;\n\n-   poverty rate---percent of the population living under the poverty line;\n\n-   median income ratio---median household income as a percent of the state's median household income;\n\n-   change in employment---percent change in the number of jobs; and\n\n-   change in establishments---percent change in the number of business establishments.\n\nThe counties are ranked on each of the seven indicators. The index is calculated by taking the average of the seven rankings, which are equally weighted, and normalizing the average to be equivalent to a percentile. Distress scores range from approaching zero to 100, such that a county with an average rank of 1,571 out of 3,142 will register a distress score of 50.\n\n**The County Maps:**\n\nYou can zoom and drag the maps with your mouse just like you would on Google Maps. If you hover your mouse over a county, it will show you the county name and state, along with the following numbers:\n\n-   Distress Score: These scores range from 0 to 100 and represent a percentile rank for that county. Higher scores are bad. For example, a score of 100 represents the most economically distressed county in the United States (i.e., with respect to the data I used).\n\n-   Distress Rank within U.S.: This number shows how a county compares to other counties in the United States. Unlike the distress score, lower numbers are bad, so a rank of 1 means that county is more distressed, on average, than any other county in the United States.\n\n-   Distress Rank within State: This only considers counties within the same state. For example, Johnson County has a rank of 105, which means it is the least distressed, on average, of the 105 counties in Kansas.\n\nThe colors on the map are based on the Distress Score.\n\n**A Few Notes on the Data:**\n\nThe calculations present results for two time periods reflecting the composition and availability of the Census Bureau's ACS 5-Year Estimates: 2013-2017 and 2014-2018. The 5-year estimates are constructed from five years' worth of data collection, reflecting the length of time required to compile enough data to provide meaningful and accurate estimates at fine geographic scales, such as counties and zip codes. County Business Patterns data are available annually, and I chose to examine the years that match the ends of each ACS 5-year window. For example, the change in employment represents the percent change in the number of jobs from 2017 to 2018.\n\nIn instances where employment or establishment estimates from the County Business Patterns data were not available for a particular county, I imputed the missing values using the average for the other counties in the same state. This only impacted two counties in the United States.\n\n```{python}\n\n#| echo: false\nimport numpy as np\nimport pandas as pd\nimport requests\nimport scipy.stats as ss\nimport matplotlib as mpl\nimport json\nimport plotly.graph_objects as go\nfrom urllib.request import urlopen\nfrom IPython.display import Image\nfrom IPython.display import HTML\n\n#hide\n\ndf18 = pd.read_csv('data/2018-rankings.csv', dtype={'fips':'str'})\ndf17 = pd.read_csv('data/2017-rankings.csv', usecols=['fips', 'pct_rank'], dtype={'fips':'str'}).\\\nrename(columns={'pct_rank':'2017_rank'})\ndf = pd.merge(df18, df17, how='left', on='fips')\ndf['rank_chg'] = df['pct_rank'] - df['2017_rank']\n\ndfc = pd.read_csv('data/state-centers.csv', encoding= 'unicode_escape')\ndf = pd.merge(df, dfc, how='left', on='state_name')\n\ndf.to_csv('data/distress-rankings.csv', index=False)\n\n\n\n\n#hide\n\ndef color_scale(c1, c2, n): #fade (linear interpolate) from color c1 (at mix=0) to c2 (mix=1)\n    colors = []\n    c1 = np.array(mpl.colors.to_rgb(c1))\n    c2 = np.array(mpl.colors.to_rgb(c2))\n\n    for x in range(n+1):\n        color = mpl.colors.to_hex((1-x/n)*c1 + x/n*c2)\n        colors.append(color)\n\n    return colors\n\nks_gold ='#F1AD02'\nks_blue ='#002569'\nn=500\ncolors = color_scale(ks_gold, ks_blue, n)\n\nwith urlopen('https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json') as response:\n    counties = json.load(response)   \n```\n\n# Economic Distress Scores for U.S. Counties\n\nClick [here](https://sokansas-my.sharepoint.com/:u:/g/personal/nigel_soria_kdc_ks_gov/EWJwCfTD1PFDuLB89tDL01YBEQpSwl82I278uhkfc6eCfQ?e=6DLzMr) to download an interactive copy of the U.S. map.\n\n```{python}\n#| echo: false\n\n\ndf = pd.read_csv('data/distress-rankings.csv', dtype={'fips':'str'})\n\nfig = go.Figure(go.Choroplethmapbox(geojson=counties, locations=df['fips'], z=df['pct_rank'],\n                                    colorscale=colors, zmin=0, zmax=100,\n                                    marker_opacity=0.5, marker_line_width=0,\n                                    text='County:  ' + df['county'].str.title() +\n                                    '<br>State:  ' + df['state_name'] + \n                                    '<br>Distress Score (2014-2018):   ' + df['pct_rank'].round(1).astype(str) +\n                                    '<br>Distress Score (2013-2017): ' + df['2017_rank'].round(1).astype(str) +\n                                    '<br>Change in Distress Score:  ' + df['rank_chg'].round(1).astype(str) +\n                                    '<br>Distress Rank within U.S. (2014-2018):  ' + df['us_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) + \n                                    ' / ' + '{:,}'.format(df.shape[0]) +\n                                    '<br>Distress Rank within State (2014-2018):  ' + df['st_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) +\n                                    ' / ' + df['counties'].astype(str),\n                                    hoverinfo='text',\n                                    colorbar={'title':'Distress Score <br> (2014-2018)'}\n                                   ))\nfig.update_layout(mapbox_style='carto-positron',\n                  mapbox_zoom=3, mapbox_center={'lat': 37.0902, 'lon': -95.7129})\nfig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n# fig.update_layout(mapbox_zoom=3, mapbox_center={'lat': 37.0902, 'lon': -95.7129})\n# fig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n\nfig.show()\n\n# Image('figures/us-edi.png')\n```\n\n# Economic Distress Scores for Kansas Counties\n\nClick [here](https://sokansas-my.sharepoint.com/:u:/g/personal/nigel_soria_kdc_ks_gov/EXroEBW6FcZHopjiij-8NTUB496oibwj-FvhVFCZQYQPyg?e=WXyPvh) to download an interactive copy of the Kansas-specific map.\n\n```{python}\n#| echo: false\n\n#hide\n\ndf = pd.read_csv('data/distress-rankings.csv', dtype={'fips':'str'})\n\nstate = 'Kansas'\n    \nfmask = df['state_name']==state\n\nfig = go.Figure(go.Choroplethmapbox(geojson=counties, locations=df[fmask]['fips'], z=df[fmask]['pct_rank'],\n                                    colorscale=colors, zmin=0, zmax=100,\n                                    marker_opacity=0.5, marker_line_width=0,\n                                    text='County:  ' + df[fmask]['county'].str.title() +\n                                    '<br>State:  ' + df[fmask]['state_name'] + \n                                    '<br>Distress Score (2014-2018):   ' + df[fmask]['pct_rank'].round(1).astype(str) +\n                                    '<br>Distress Score (2013-2017): ' + df[fmask]['2017_rank'].round(1).astype(str) +\n                                    '<br>Change in Distress Score:  ' + df[fmask]['rank_chg'].round(1).astype(str) +\n                                    '<br>Distress Rank within U.S. (2014-2018):  ' + df[fmask]['us_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) + \n                                    ' / ' + '{:,}'.format(df.shape[0]) +\n                                    '<br>Distress Rank within State (2014-2018):  ' + df[fmask]['st_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) +\n                                    ' / ' + df[fmask]['counties'].astype(str),\n                                    hoverinfo='text',\n                                    colorbar={'title':'Distress Score <br> (2014-2018)'}\n                                   ))\nfig.update_layout(mapbox_style='carto-positron',\n                  mapbox_zoom=6, mapbox_center = {'lat': df[fmask]['lat'].iloc[0], 'lon': df[fmask]['lon'].iloc[0]})\nfig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n\nfig.show()\n```\n","srcMarkdownNoYaml":"\n\n# Methodology\n\nThe index combines seven indicators into a single, comparative measure of economic well-being. The index is constructed from the U.S. Census Bureau's American Community Survey (ACS) 5-Year Estimates and County Business Patterns (CBP) datasets.\n\nThe seven components of the index are:\n\n-   no high school diploma---percent of the population 25 years of age and older without a high school diploma or equivalent;\n\n-   housing vacancy rate---percent of habitable housing that is unoccupied, excluding properties that are for seasonal, recreational, or occasional use;\n\n-   unemployment rate---the number of unemployed people as a fraction of the labor force;\n\n-   poverty rate---percent of the population living under the poverty line;\n\n-   median income ratio---median household income as a percent of the state's median household income;\n\n-   change in employment---percent change in the number of jobs; and\n\n-   change in establishments---percent change in the number of business establishments.\n\nThe counties are ranked on each of the seven indicators. The index is calculated by taking the average of the seven rankings, which are equally weighted, and normalizing the average to be equivalent to a percentile. Distress scores range from approaching zero to 100, such that a county with an average rank of 1,571 out of 3,142 will register a distress score of 50.\n\n**The County Maps:**\n\nYou can zoom and drag the maps with your mouse just like you would on Google Maps. If you hover your mouse over a county, it will show you the county name and state, along with the following numbers:\n\n-   Distress Score: These scores range from 0 to 100 and represent a percentile rank for that county. Higher scores are bad. For example, a score of 100 represents the most economically distressed county in the United States (i.e., with respect to the data I used).\n\n-   Distress Rank within U.S.: This number shows how a county compares to other counties in the United States. Unlike the distress score, lower numbers are bad, so a rank of 1 means that county is more distressed, on average, than any other county in the United States.\n\n-   Distress Rank within State: This only considers counties within the same state. For example, Johnson County has a rank of 105, which means it is the least distressed, on average, of the 105 counties in Kansas.\n\nThe colors on the map are based on the Distress Score.\n\n**A Few Notes on the Data:**\n\nThe calculations present results for two time periods reflecting the composition and availability of the Census Bureau's ACS 5-Year Estimates: 2013-2017 and 2014-2018. The 5-year estimates are constructed from five years' worth of data collection, reflecting the length of time required to compile enough data to provide meaningful and accurate estimates at fine geographic scales, such as counties and zip codes. County Business Patterns data are available annually, and I chose to examine the years that match the ends of each ACS 5-year window. For example, the change in employment represents the percent change in the number of jobs from 2017 to 2018.\n\nIn instances where employment or establishment estimates from the County Business Patterns data were not available for a particular county, I imputed the missing values using the average for the other counties in the same state. This only impacted two counties in the United States.\n\n```{python}\n\n#| echo: false\nimport numpy as np\nimport pandas as pd\nimport requests\nimport scipy.stats as ss\nimport matplotlib as mpl\nimport json\nimport plotly.graph_objects as go\nfrom urllib.request import urlopen\nfrom IPython.display import Image\nfrom IPython.display import HTML\n\n#hide\n\ndf18 = pd.read_csv('data/2018-rankings.csv', dtype={'fips':'str'})\ndf17 = pd.read_csv('data/2017-rankings.csv', usecols=['fips', 'pct_rank'], dtype={'fips':'str'}).\\\nrename(columns={'pct_rank':'2017_rank'})\ndf = pd.merge(df18, df17, how='left', on='fips')\ndf['rank_chg'] = df['pct_rank'] - df['2017_rank']\n\ndfc = pd.read_csv('data/state-centers.csv', encoding= 'unicode_escape')\ndf = pd.merge(df, dfc, how='left', on='state_name')\n\ndf.to_csv('data/distress-rankings.csv', index=False)\n\n\n\n\n#hide\n\ndef color_scale(c1, c2, n): #fade (linear interpolate) from color c1 (at mix=0) to c2 (mix=1)\n    colors = []\n    c1 = np.array(mpl.colors.to_rgb(c1))\n    c2 = np.array(mpl.colors.to_rgb(c2))\n\n    for x in range(n+1):\n        color = mpl.colors.to_hex((1-x/n)*c1 + x/n*c2)\n        colors.append(color)\n\n    return colors\n\nks_gold ='#F1AD02'\nks_blue ='#002569'\nn=500\ncolors = color_scale(ks_gold, ks_blue, n)\n\nwith urlopen('https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json') as response:\n    counties = json.load(response)   \n```\n\n# Economic Distress Scores for U.S. Counties\n\nClick [here](https://sokansas-my.sharepoint.com/:u:/g/personal/nigel_soria_kdc_ks_gov/EWJwCfTD1PFDuLB89tDL01YBEQpSwl82I278uhkfc6eCfQ?e=6DLzMr) to download an interactive copy of the U.S. map.\n\n```{python}\n#| echo: false\n\n\ndf = pd.read_csv('data/distress-rankings.csv', dtype={'fips':'str'})\n\nfig = go.Figure(go.Choroplethmapbox(geojson=counties, locations=df['fips'], z=df['pct_rank'],\n                                    colorscale=colors, zmin=0, zmax=100,\n                                    marker_opacity=0.5, marker_line_width=0,\n                                    text='County:  ' + df['county'].str.title() +\n                                    '<br>State:  ' + df['state_name'] + \n                                    '<br>Distress Score (2014-2018):   ' + df['pct_rank'].round(1).astype(str) +\n                                    '<br>Distress Score (2013-2017): ' + df['2017_rank'].round(1).astype(str) +\n                                    '<br>Change in Distress Score:  ' + df['rank_chg'].round(1).astype(str) +\n                                    '<br>Distress Rank within U.S. (2014-2018):  ' + df['us_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) + \n                                    ' / ' + '{:,}'.format(df.shape[0]) +\n                                    '<br>Distress Rank within State (2014-2018):  ' + df['st_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) +\n                                    ' / ' + df['counties'].astype(str),\n                                    hoverinfo='text',\n                                    colorbar={'title':'Distress Score <br> (2014-2018)'}\n                                   ))\nfig.update_layout(mapbox_style='carto-positron',\n                  mapbox_zoom=3, mapbox_center={'lat': 37.0902, 'lon': -95.7129})\nfig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n# fig.update_layout(mapbox_zoom=3, mapbox_center={'lat': 37.0902, 'lon': -95.7129})\n# fig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n\nfig.show()\n\n# Image('figures/us-edi.png')\n```\n\n# Economic Distress Scores for Kansas Counties\n\nClick [here](https://sokansas-my.sharepoint.com/:u:/g/personal/nigel_soria_kdc_ks_gov/EXroEBW6FcZHopjiij-8NTUB496oibwj-FvhVFCZQYQPyg?e=WXyPvh) to download an interactive copy of the Kansas-specific map.\n\n```{python}\n#| echo: false\n\n#hide\n\ndf = pd.read_csv('data/distress-rankings.csv', dtype={'fips':'str'})\n\nstate = 'Kansas'\n    \nfmask = df['state_name']==state\n\nfig = go.Figure(go.Choroplethmapbox(geojson=counties, locations=df[fmask]['fips'], z=df[fmask]['pct_rank'],\n                                    colorscale=colors, zmin=0, zmax=100,\n                                    marker_opacity=0.5, marker_line_width=0,\n                                    text='County:  ' + df[fmask]['county'].str.title() +\n                                    '<br>State:  ' + df[fmask]['state_name'] + \n                                    '<br>Distress Score (2014-2018):   ' + df[fmask]['pct_rank'].round(1).astype(str) +\n                                    '<br>Distress Score (2013-2017): ' + df[fmask]['2017_rank'].round(1).astype(str) +\n                                    '<br>Change in Distress Score:  ' + df[fmask]['rank_chg'].round(1).astype(str) +\n                                    '<br>Distress Rank within U.S. (2014-2018):  ' + df[fmask]['us_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) + \n                                    ' / ' + '{:,}'.format(df.shape[0]) +\n                                    '<br>Distress Rank within State (2014-2018):  ' + df[fmask]['st_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) +\n                                    ' / ' + df[fmask]['counties'].astype(str),\n                                    hoverinfo='text',\n                                    colorbar={'title':'Distress Score <br> (2014-2018)'}\n                                   ))\nfig.update_layout(mapbox_style='carto-positron',\n                  mapbox_zoom=6, mapbox_center = {'lat': df[fmask]['lat'].iloc[0], 'lon': df[fmask]['lon'].iloc[0]})\nfig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n\nfig.show()\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","embed-resources":true,"toc":false,"css":["../styles.css"],"output-file":"economic_distress.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.309","page-layout":"full","footer":"footer.html","title":"Economic Distress Index","description":"A county-level measure of economic distress based on seven indicators.","author":"Nigel Soria","badges":true,"categories":["census","acs","economic distress","counties"],"permalink":"/distress-index/","image":"images/ks-edi.png"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}