[
  {
    "objectID": "Quartopage.html",
    "href": "Quartopage.html",
    "title": "Data you can explore",
    "section": "",
    "text": "Kansas Unemployment During COVID19\n  \n  \n    \n      \n    \n    Economic Distress Index\n  \n  \n    \n      \n    \n    Unemployment vs. Underemployment\n  \n  \n    \n      \n    \n    HB1 Visa information\n  \n  \n    \n      \n    \n    HB1 Visa information\n  \n  \n    \n      \n    \n    H-1B Visas in Kansas\n \n\n\n\n\n\n\n Back to top"
  },
  {
    "objectID": "different-page/Unemployment.html",
    "href": "different-page/Unemployment.html",
    "title": "Kansas Unemployment During COVID-19",
    "section": "",
    "text": "Background\nMany businesses are experiencing large decreases in sales and revenue as a result of state and local stay-at-home orders associated with the COVID-19 pandemic, and these businesses are already responding to potential solvency and liquidity problems by laying off workers. Accordingly, many are wondering how high the unemployment rate might be in the second quarter of 2020.\nNot all businesses, sectors, or occupations will experience the negative shock from COVID-19 equally. Many workers, such as those in professional services, may be able to work from home and continue their activities with minimal disruption. Other workers, such as those who work in occupations that involve direct physical contact with customers (e.g., barbers and hairstylists), are likely to see their jobs negatively affected by social-distancing measures and stay-at-home orders.\nIn this post, I use Kansas-specific data on occupation composition to replicate recent analysis by the St. Louis Fed, which attempts to arrive at an estimate of what the unemployment rate may look like at the end of the second quarter of 2020. The St. Louis Fed estimates a 32.1 percent unemployment rate for the second quarter of 2020.\n\nCurrent Labor Statistics\nI start with the state of the Kansas economy as of February 2020. According to the Kansas Department of Labor (via KLIC), the civilian labor force consisted of approxiately 1.5 million people, and the seasonally-adjusted unemployment rate was 3.1%, which means there were around 46,000 unemployed Kansans in February. In the calculations that follow, I assumed the labor force remains constant and that none of the currently unemployed individuals would be able to find a job in the second quarter of 2020.\n\nimport numpy as np\nimport pandas as pd\nimport requests\nimport scipy.stats as ss\nimport matplotlib as mpl\nimport json\nimport plotly.graph_objects as go\nfrom urllib.request import urlopen\nfrom IPython.display import Image\nfrom IPython.display import HTML\n\n\n\nCurrent labor statistics from the Kansas Department of Labor (February 2020):\nCivilian Labor Force = 1,496,507\nUnemployment Rate = 3.1%\n\n\n\n\n\nMethodology\nTo estimate the Kansas unemployment rate for the second quarter of 2020, I follow the analysis by the St. Louis Fed and combine occupation composition data from the Bureau of Labor Statistics with work context data from O*Net Online to compute how many jobs might be exposed to layoff risk due to social distancing measures and stay-at-home orders.\nIn a recent article, Matthew Famiglietti, Fernando Leibovici and Ana Maria Santacreu combine individual-level data from the 2017 American Community Survey with information on occupational contact intensity from O*NET to determine how many people work in occupations that require the worker to perform tasks in close physical proximity to other people. They find that 27.3 million workers have occupations with a high contact intensity. These occupations include barbers, hairstylists, food and beverage serving workers, and flight attendants, among others.\nIn another article, Charles Gascon uses Occupation Employment Statistics from the Bureau of Labor Statistics to determine which occupations face a high risk of unemployment, and he estimates that 46 percent, or approximately 67 million U.S. workers, face a high risk of being laid off.\nI combine the approaches from the two articles and merge state-level occupation composition data from the Bureau of Labor Statics with information on occupational contact intensity from O*NET. I saved some time by extracting the contact intensity information from the Famiglietti, Leibovici, and Santacreu dataset as it is publicly available.\n\n\n\n\n\n\n\n\n\narea\narea_title\narea_type\nnaics\nnaics_title\ni_group\nown_code\nocc_code\nocc_title\no_group\ntot_emp\nemp_prse\njobs_1000\nloc_quotient\npct_total\nh_mean\na_mean\nmean_prse\nh_pct10\nh_pct25\nh_median\nh_pct75\nh_pct90\na_pct10\na_pct25\na_median\na_pct75\na_pct90\nannual\nhourly\n\n\n\n\n10938\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-1011\nChief Executives\ndetailed\n3620\n3.3\n2.598\n1.85\nNaN\n79.21\n164760\n1.5\n18.07\n46.17\n69.85\n#\n#\n37580\n96030\n145280\n#\n#\nNaN\nNaN\n\n\n10939\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-1021\nGeneral and Operations Managers\ndetailed\n18340\n2.1\n13.17\n0.81\nNaN\n47.34\n98480\n1\n20.82\n27.7\n38.33\n58.19\n85.65\n43300\n57610\n79720\n121040\n178140\nNaN\nNaN\n\n\n10940\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-1031\nLegislators\ndetailed\n780\n16.9\n0.563\n1.58\nNaN\n*\n20240\n2.8\n*\n*\n*\n*\n*\n16150\n16930\n18230\n19590\n28430\nTRUE\nNaN\n\n\n10941\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-2011\nAdvertising and Promotions Managers\ndetailed\n90\n19\n0.066\n0.39\nNaN\n56.02\n116510\n8.8\n26.76\n31.97\n48.02\n69.85\n98.29\n55660\n66490\n99880\n145290\n204450\nNaN\nNaN\n\n\n10942\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-2021\nMarketing Managers\ndetailed\n1660\n7.5\n1.194\n0.67\nNaN\n69.93\n145440\n3.3\n32.73\n45.42\n63.9\n87.05\n#\n68090\n94480\n132910\n181060\n#\nNaN\nNaN\n\n\n\n\n\n\n\nThe Kansas Occupation Employment Statistics data contain a column named `occ_code`, which represents the six-digit occupation code; however, the Famiglietti, Leibovici, and Santacreu data contain a four digit occupation code (and no hyphen), so we need to create a similar field in the Kansas dataset that we can use to match the Famiglietti-Leibovici-Santacreu data.\n\n\n\n\n\n\n\n\n\narea\narea_title\narea_type\nnaics\nnaics_title\ni_group\nown_code\nocc_code\nocc_title\no_group\ntot_emp\nemp_prse\njobs_1000\nloc_quotient\npct_total\nh_mean\na_mean\nmean_prse\nh_pct10\nh_pct25\nh_median\nh_pct75\nh_pct90\na_pct10\na_pct25\na_median\na_pct75\na_pct90\nannual\nhourly\nsoc\nprox_index\nscore\nessential\nhome_work\ncategory\n\n\n\n\n0\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-1011\nChief Executives\ndetailed\n3620\n3.3\n2.598\n1.85\nNaN\n79.21\n164760\n1.5\n18.07\n46.17\n69.85\n#\n#\n37580\n96030\n145280\n#\n#\nNaN\nNaN\n11-10\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n1\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-1021\nGeneral and Operations Managers\ndetailed\n18340\n2.1\n13.17\n0.81\nNaN\n47.34\n98480\n1\n20.82\n27.7\n38.33\n58.19\n85.65\n43300\n57610\n79720\n121040\n178140\nNaN\nNaN\n11-10\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n2\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-1031\nLegislators\ndetailed\n780\n16.9\n0.563\n1.58\nNaN\n*\n20240\n2.8\n*\n*\n*\n*\n*\n16150\n16930\n18230\n19590\n28430\nTRUE\nNaN\n11-10\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n3\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-2011\nAdvertising and Promotions Managers\ndetailed\n90\n19\n0.066\n0.39\nNaN\n56.02\n116510\n8.8\n26.76\n31.97\n48.02\n69.85\n98.29\n55660\n66490\n99880\n145290\n204450\nNaN\nNaN\n11-20\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n4\n20\nKansas\n2\n000000\nCross-industry\ncross-industry\n1235\n11-2021\nMarketing Managers\ndetailed\n1660\n7.5\n1.194\n0.67\nNaN\n69.93\n145440\n3.3\n32.73\n45.42\n63.9\n87.05\n#\n68090\n94480\n132910\n181060\n#\nNaN\nNaN\n11-20\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n\n\n\n\n\n\n\nCalculating the Second-Quarter Unemployment Rate\nThe St. Louis Fed analysis averages the numbers from the Famiglietti-Leibovici-Santacreu and Gascon articles to arrive at a point estimate of the number of workers at risk of being laid off during the second quarter. This results in approximately 47 million people being laid off during this period. This is quite high as it assumes everyone in a “high risk” occupation will become laid off. Therefore, I depart from the St. Louis Fed analysis by taking into account the fact that some occupations have been designated as essential and face a lower risk of layoff. Using guidance from the Kansas Essential Functions Framework, I added a field to the Famiglietti, Leibovici, and Santacreu data that indicates whether an occupation is essential.\nTo calculate the expected layoffs, I added the numbers for the occupations in the highest contact intensity category (following Famiglietti, Leibovici, and Santacreu), and I subtracted the numbers from occupations that are essential (my innovation). Adding the expected layoffs to the initial number of unemployed in February results in approximately 66,000 total unemployed Kansans. Given the assumption of a constant labor force, this results in an unemployment rate of 4.4 percent. The calculation can be summarized in the following steps:\n\n\n1. Kansas civilian labor force in February 2020 = 1,496,507 (KDOL)\n2. Kansas unemployment rate in February 2020 = 3.1% (KDOL)\n3. Unemployed Kansans in February 2020 = 46,392 (#1 * #2)\n4. Kansas workers in high contact-intensive occupations = 0 (Nigel's calculations using O*Net data)\n5. Kansas workers employed in \"essential\" occupations = 0 (Nigel's calculations using KEFF guidance)\n6. Estimated layoffs in second quarter 2020 = 0 (#4 - #5)\n7. Unemployed Kansans in second quarter 2020 = 46,392 (#3 + #6)\n8. Kansas unemployment rate in second quarter 2020 = 3.1% (#7 / #1)\n\n\n\n\nSensitivity Analysis\nThe St. Louis Fed estimate of 32.1 percent seems a bit high, but my estimate of 4.4 percent seems very low, especially given the large spike in the number unemployment insurance claims. This is because my estimate assumes everyone in an “essential” occupation will retain his or her job, which is probably not the case. For example, restaurants need cooks and delivery drivers, but they do not need waitstaff right now. Some waiters and waitresses may assist with deliveries, which may keep their hours from getting cut, but dishwashers may end up working fewer hours as they will be washing fewer dishes. We can look at the sensitivity of the estimated unemployment rate to different assumptions in the retention rate of essential occupations. That is, maybe restaurants will only retain 50 percent of their staff instead of 100 percent as the estimate currently assumes.\nThe graph below shows the calculated unemployment rate based on different retention rates for essential occupations. The estimated Kansas unemployment rate for Q2 2002 ranges from 4.4 percent to 22.7 percent, where 22.7 percent assumes no retention of essential occupations (i.e., similar to the St. Louis Fed analysis).\n\n\n\n                                                \n\n\n\n\n\n\n                            \n                                            \n\n\n\n\n\n\nSummary of Calculations\nIt is important to note these estimates make several important assumptions:\n\nthe calculations assume the labor force is constant and exclude the fact that some recently unemployed workers may become discouraged and cease looking for employment (i.e., no longer technically unemployed);\nmany businesses may send workers home with pay, rather than laying them off;\nonly occupations with a proximity score of 2 are at risk of being layed off;\nthe sensitivity analysis assumes retention rates are the same accross all occupations; and\nthe calculations do not account for any potential effects of fiscal measures, such as the recent stimulus package or changes in unemployment insurance policy.\n\nIt is also important to keep in mind these are rough calculations. As such, any attempts to place upper and lower bounds on these estimates would follow the same inexact process. The estimates are sensitive to a number of assumptions, but we may be able to relax some of these assumptions with better, more up-to-date data.\nThe expected duration of unemployment matters just as much, if not more, than the unemployment rate itself, especially if the recovery is quicker than we anticipate; however, the uncertainty around when and where it will be safe to resume certain economic activity makes ex ante analysis of the economic impact of COVID-19 very difficult. At best, we can look at what may happen if different scenarios unfold.\n\n\nOther Limitations and Areas for Improvement\nThough I followed guidance from the Kansas Essential Functions Framework, the designation of occupations as essential is somewhat subjective. It might be nice to have others weigh in on which occupations meet the conditions of these guidelines.\nAlso, I started working on adding a field that indicates which positions may be performed from home (we would be able to subtract these from the unemployed as well), but this is also very subjective. I thought O*NET might also have some sort of “telecommute score,” but I haven’t been able to find anything like that just yet.\n\n\n\n\n Back to top"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Pandoc is a Haskell library for converting from one markup format to another, and a command-line tool that uses this library.\nPandoc can convert between numerous markup and word processing formats, including, but not limited to, various flavors of Markdown, HTML, LaTeX and Word docx. For the full lists of input and output formats, see the --from and --to options below. Pandoc can also produce PDF output: see creating a PDF, below.\nPandoc’s enhanced version of Markdown includes syntax for tables, definition lists, metadata blocks, footnotes, citations, math, and much more. See below under Pandoc’s Markdown.\nPandoc has a modular design: it consists of a set of readers, which parse text in a given format and produce a native representation of the document (an abstract syntax tree or AST), and a set of writers, which convert this native representation into a target format. Thus, adding an input or output format requires only adding a reader or writer. Users can also run custom pandoc filters to modify the intermediate AST.\nBecause pandoc’s intermediate representation of a document is less expressive than many of the formats it converts between, one should not expect perfect conversions between every format and every other. Pandoc attempts to preserve the structural elements of a document, but not formatting details such as margin size. And some document elements, such as complex tables, may not fit into pandoc’s simple document model. While conversions from pandoc’s Markdown to all formats aspire to be perfect, conversions from formats more expressive than pandoc’s Markdown can be expected to be lossy."
  },
  {
    "objectID": "different-page/economic_distress.html",
    "href": "different-page/economic_distress.html",
    "title": "Economic Distress Index",
    "section": "",
    "text": "Methodology\nThe index combines seven indicators into a single, comparative measure of economic well-being. The index is constructed from the U.S. Census Bureau’s American Community Survey (ACS) 5-Year Estimates and County Business Patterns (CBP) datasets.\nThe seven components of the index are:\n\nno high school diploma—percent of the population 25 years of age and older without a high school diploma or equivalent;\nhousing vacancy rate—percent of habitable housing that is unoccupied, excluding properties that are for seasonal, recreational, or occasional use;\nunemployment rate—the number of unemployed people as a fraction of the labor force;\npoverty rate—percent of the population living under the poverty line;\nmedian income ratio—median household income as a percent of the state’s median household income;\nchange in employment—percent change in the number of jobs; and\nchange in establishments—percent change in the number of business establishments.\n\nThe counties are ranked on each of the seven indicators. The index is calculated by taking the average of the seven rankings, which are equally weighted, and normalizing the average to be equivalent to a percentile. Distress scores range from approaching zero to 100, such that a county with an average rank of 1,571 out of 3,142 will register a distress score of 50.\nThe County Maps:\nYou can zoom and drag the maps with your mouse just like you would on Google Maps. If you hover your mouse over a county, it will show you the county name and state, along with the following numbers:\n\nDistress Score: These scores range from 0 to 100 and represent a percentile rank for that county. Higher scores are bad. For example, a score of 100 represents the most economically distressed county in the United States (i.e., with respect to the data I used).\nDistress Rank within U.S.: This number shows how a county compares to other counties in the United States. Unlike the distress score, lower numbers are bad, so a rank of 1 means that county is more distressed, on average, than any other county in the United States.\nDistress Rank within State: This only considers counties within the same state. For example, Johnson County has a rank of 105, which means it is the least distressed, on average, of the 105 counties in Kansas.\n\nThe colors on the map are based on the Distress Score.\nA Few Notes on the Data:\nThe calculations present results for two time periods reflecting the composition and availability of the Census Bureau’s ACS 5-Year Estimates: 2013-2017 and 2014-2018. The 5-year estimates are constructed from five years’ worth of data collection, reflecting the length of time required to compile enough data to provide meaningful and accurate estimates at fine geographic scales, such as counties and zip codes. County Business Patterns data are available annually, and I chose to examine the years that match the ends of each ACS 5-year window. For example, the change in employment represents the percent change in the number of jobs from 2017 to 2018.\nIn instances where employment or establishment estimates from the County Business Patterns data were not available for a particular county, I imputed the missing values using the average for the other counties in the same state. This only impacted two counties in the United States.\n\n\nEconomic Distress Scores for U.S. Counties\nClick here to download an interactive copy of the U.S. map.\n\n\n\n                                                \n\n\n\n\nEconomic Distress Scores for Kansas Counties\nClick here to download an interactive copy of the Kansas-specific map."
  },
  {
    "objectID": "different-page/2020-09-28-economic-distress-indicators.html",
    "href": "different-page/2020-09-28-economic-distress-indicators.html",
    "title": "Methodology",
    "section": "",
    "text": "# Economic Distress Index\n&gt; A county-level measure of economic distress based on seven indicators.\n\n- toc: true\n- author: Nigel Soria\n- badges: true\n- categories: [census, acs, economic distress, counties]\n- permalink: /distress-index/\n- image: images/ks-edi.png\n\nThe index combines seven indicators into a single, comparative measure of economic well-being. The index is constructed from the U.S. Census Bureau’s American Community Survey (ACS) 5-Year Estimates and County Business Patterns (CBP) datasets.\nThe seven components of the index are:\n\nno high school diploma—percent of the population 25 years of age and older without a high school diploma or equivalent;\nhousing vacancy rate—percent of habitable housing that is unoccupied, excluding properties that are for seasonal, recreational, or occasional use;\nunemployment rate—the number of unemployed people as a fraction of the labor force;\npoverty rate—percent of the population living under the poverty line;\nmedian income ratio—median household income as a percent of the state’s median household income;\nchange in employment—percent change in the number of jobs; and\nchange in establishments—percent change in the number of business establishments.\n\nThe counties are ranked on each of the seven indicators. The index is calculated by taking the average of the seven rankings, which are equally weighted, and normalizing the average to be equivalent to a percentile. Distress scores range from approaching zero to 100, such that a county with an average rank of 1,571 out of 3,142 will register a distress score of 50.\nThe County Maps:\nYou can zoom and drag the maps with your mouse just like you would on Google Maps. If you hover your mouse over a county, it will show you the county name and state, along with the following numbers:\n\nDistress Score: These scores range from 0 to 100 and represent a percentile rank for that county. Higher scores are bad. For example, a score of 100 represents the most economically distressed county in the United States (i.e., with respect to the data I used).\nDistress Rank within U.S.: This number shows how a county compares to other counties in the United States. Unlike the distress score, lower numbers are bad, so a rank of 1 means that county is more distressed, on average, than any other county in the United States.\nDistress Rank within State: This only considers counties within the same state. For example, Johnson County has a rank of 105, which means it is the least distressed, on average, of the 105 counties in Kansas.\n\nThe colors on the map are based on the Distress Score.\nA Few Notes on the Data:\nThe calculations present results for two time periods reflecting the composition and availability of the Census Bureau’s ACS 5-Year Estimates: 2013-2017 and 2014-2018. The 5-year estimates are constructed from five years’ worth of data collection, reflecting the length of time required to compile enough data to provide meaningful and accurate estimates at fine geographic scales, such as counties and zip codes. County Business Patterns data are available annually, and I chose to examine the years that match the ends of each ACS 5-year window. For example, the change in employment represents the percent change in the number of jobs from 2017 to 2018.\nIn instances where employment or establishment estimates from the County Business Patterns data were not available for a particular county, I imputed the missing values using the average for the other counties in the same state. This only impacted two counties in the United States.\n\n#hide\n\nimport numpy as np\nimport pandas as pd\nimport requests\nimport scipy.stats as ss\nimport matplotlib as mpl\nimport json\nimport plotly.graph_objects as go\nfrom urllib.request import urlopen\nfrom IPython.display import Image\nfrom IPython.display import HTML\n\n\n#hide\n\ndf18 = pd.read_csv('data/2018-rankings.csv', dtype={'fips':'str'})\ndf17 = pd.read_csv('data/2017-rankings.csv', usecols=['fips', 'pct_rank'], dtype={'fips':'str'}).\\\n    rename(columns={'pct_rank':'2017_rank'})\ndf = pd.merge(df18, df17, how='left', on='fips')\ndf['rank_chg'] = df['pct_rank'] - df['2017_rank']\n\ndfc = pd.read_csv('data/state-centers.csv', encoding= 'unicode_escape')\ndf = pd.merge(df, dfc, how='left', on='state_name')\n\ndf.to_csv('data/distress-rankings.csv', index=False)\n\n\n#hide\n\ndef color_scale(c1, c2, n): #fade (linear interpolate) from color c1 (at mix=0) to c2 (mix=1)\n    colors = []\n    c1 = np.array(mpl.colors.to_rgb(c1))\n    c2 = np.array(mpl.colors.to_rgb(c2))\n\n    for x in range(n+1):\n        color = mpl.colors.to_hex((1-x/n)*c1 + x/n*c2)\n        colors.append(color)\n\n    return colors\n\nks_gold ='#F1AD02'\nks_blue ='#002569'\nn=500\ncolors = color_scale(ks_gold, ks_blue, n)\n\nwith urlopen('https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json') as response:\n    counties = json.load(response)    \n\n\nEconomic Distress Scores for U.S. Counties\nClick here to download an interactive copy of the U.S. map.\n\n#hide\n\ndf = pd.read_csv('data/distress-rankings.csv', dtype={'fips':'str'})\n\nfig = go.Figure(go.Choroplethmapbox(geojson=counties, locations=df['fips'], z=df['pct_rank'],\n                                    colorscale=colors, zmin=0, zmax=100,\n                                    marker_opacity=0.5, marker_line_width=0,\n                                    text='County:  ' + df['county'].str.title() +\n                                    '&lt;br&gt;State:  ' + df['state_name'] + \n                                    '&lt;br&gt;Distress Score (2014-2018):   ' + df['pct_rank'].round(1).astype(str) +\n                                    '&lt;br&gt;Distress Score (2013-2017): ' + df['2017_rank'].round(1).astype(str) +\n                                    '&lt;br&gt;Change in Distress Score:  ' + df['rank_chg'].round(1).astype(str) +\n                                    '&lt;br&gt;Distress Rank within U.S. (2014-2018):  ' + df['us_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) + \n                                    ' / ' + '{:,}'.format(df.shape[0]) +\n                                    '&lt;br&gt;Distress Rank within State (2014-2018):  ' + df['st_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) +\n                                    ' / ' + df['counties'].astype(str),\n                                    hoverinfo='text',\n                                    colorbar={'title':'Distress Score &lt;br&gt; (2014-2018)'}\n                                   ))\nfig.update_layout(mapbox_style='carto-positron',\n                  mapbox_zoom=3, mapbox_center={'lat': 37.0902, 'lon': -95.7129})\nfig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n# fig.update_layout(mapbox_zoom=3, mapbox_center={'lat': 37.0902, 'lon': -95.7129})\n# fig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n\nfig.show()\n\n# Image('figures/us-edi.png')\n\n\n\n        \n        \n            \n            \n        \n\n\n\n#hide_input\n\nHTML(fig.to_html(include_plotlyjs='cdn'))\n\n\n\n\n\n    \n        \n                \n            \n            \n            \n        \n\n\n\n\n\n\nEconomic Distress Scores for Kansas Counties\nClick here to download an interactive copy of the Kansas-specific map.\n\n#hide\n\ndf = pd.read_csv('data/distress-rankings.csv', dtype={'fips':'str'})\n\nstate = 'Kansas'\n    \nfmask = df['state_name']==state\n\nfig = go.Figure(go.Choroplethmapbox(geojson=counties, locations=df[fmask]['fips'], z=df[fmask]['pct_rank'],\n                                    colorscale=colors, zmin=0, zmax=100,\n                                    marker_opacity=0.5, marker_line_width=0,\n                                    text='County:  ' + df[fmask]['county'].str.title() +\n                                    '&lt;br&gt;State:  ' + df[fmask]['state_name'] + \n                                    '&lt;br&gt;Distress Score (2014-2018):   ' + df[fmask]['pct_rank'].round(1).astype(str) +\n                                    '&lt;br&gt;Distress Score (2013-2017): ' + df[fmask]['2017_rank'].round(1).astype(str) +\n                                    '&lt;br&gt;Change in Distress Score:  ' + df[fmask]['rank_chg'].round(1).astype(str) +\n                                    '&lt;br&gt;Distress Rank within U.S. (2014-2018):  ' + df[fmask]['us_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) + \n                                    ' / ' + '{:,}'.format(df.shape[0]) +\n                                    '&lt;br&gt;Distress Rank within State (2014-2018):  ' + df[fmask]['st_rank'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) +\n                                    ' / ' + df[fmask]['counties'].astype(str),\n                                    hoverinfo='text',\n                                    colorbar={'title':'Distress Score &lt;br&gt; (2014-2018)'}\n                                   ))\nfig.update_layout(mapbox_style='carto-positron',\n                  mapbox_zoom=6, mapbox_center = {'lat': df[fmask]['lat'].iloc[0], 'lon': df[fmask]['lon'].iloc[0]})\nfig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n\nfig.show()"
  },
  {
    "objectID": "different-page/Unemployment_measures.html",
    "href": "different-page/Unemployment_measures.html",
    "title": "Unemployment vs. Underemployment",
    "section": "",
    "text": "Definitions\nThe six measures are based on the following definitions:\n\nU-1, persons unemployed 15 weeks or longer, as a percent of the civilian labor force;\nU-2, job losers and persons who completed temporary jobs, as a percent of the civilian labor force;\nU-3, total unemployed, as a percent of the civilian labor force (this is the definition used for the official unemployment rate);\nU-4, total unemployed plus discouraged workers, as a percent of the civilian labor force plus discouraged workers;\nU-5, total unemployed, plus discouraged workers, plus all other marginally attached workers, as a percent of the civilian labor force plus all marginally attached workers; and\nU-6, total unemployed, plus all marginally attached workers, plus total employed part time for economic reasons, as a percent of the civilian labor force plus all marginally attached workers.\n\n\n\nLabor Underutilization Rates for Kansas, 2003-2019 Annual Averages\nDouble clicking on one of the items in the legend will isolate that series. Double clicking again will bring back the lines for the other measures.\n\n\n\n                                                \n\n\n\n\nLabor Underutilization for States, Third Quarter of 2019 through Second Quarter of 2020 Averages"
  },
  {
    "objectID": "different-page/2020-09-30-unemployment-measures.html",
    "href": "different-page/2020-09-30-unemployment-measures.html",
    "title": "Definitions",
    "section": "",
    "text": "# Unemployment vs. Underemployment\n&gt; Alternative measures of labor underutilization.\n\n- toc: true\n- author: Nigel Soria\n- badges: true\n- categories: [bls, unemployment, discouraged]\n- permalink: /labor-utilization/\n- image: images/ks-lau.png\n\nSyntaxError: invalid syntax (400432821.py, line 2)\n\n\nThe six measures are based on the following definitions:\n\nU-1, persons unemployed 15 weeks or longer, as a percent of the civilian labor force;\nU-2, job losers and persons who completed temporary jobs, as a percent of the civilian labor force;\nU-3, total unemployed, as a percent of the civilian labor force (this is the definition used for the official unemployment rate);\nU-4, total unemployed plus discouraged workers, as a percent of the civilian labor force plus discouraged workers;\nU-5, total unemployed, plus discouraged workers, plus all other marginally attached workers, as a percent of the civilian labor force plus all marginally attached workers; and\nU-6, total unemployed, plus all marginally attached workers, plus total employed part time for economic reasons, as a percent of the civilian labor force plus all marginally attached workers.\n\n\n#hide\n\nimport numpy as np\nimport pandas as pd\nimport requests\nimport scipy.stats as ss\nimport matplotlib as mpl\nimport json\nimport plotly.graph_objects as go\nfrom urllib.request import urlopen\nfrom IPython.display import Image\nfrom IPython.display import HTML\n\n\nLabor Underutilization Rates for Kansas, 2003-2019 Annual Averages\nDouble clicking on one of the items in the legend will isolate that series. Double clicking again will bring back the lines for the other measures.\n\n#hide\n\ndf = pd.read_csv('data/ks-lau.csv')\n\nfig = go.Figure()\n\nfig.add_trace(go.Scatter(x=df.year, y=df.u1,\n                    mode='lines',\n                    name='U-1'))\nfig.add_trace(go.Scatter(x=df.year, y=df.u2,\n                    mode='lines',\n                    name='U-2'))\nfig.add_trace(go.Scatter(x=df.year, y=df.u3,\n                    mode='lines',\n                    name='U-3'))\nfig.add_trace(go.Scatter(x=df.year, y=df.u4,\n                    mode='lines',\n                    name='U-4'))\nfig.add_trace(go.Scatter(x=df.year, y=df.u5,\n                    mode='lines',\n                    name='U-5'))\nfig.add_trace(go.Scatter(x=df.year, y=df.u6,\n                    mode='lines',\n                    name='U-6'))\n\n\nannotations = []\n\nannotations.append(dict(xref='paper', yref='paper', x=0.5, y=-0.1,\n                              xanchor='center', yanchor='top',\n                              text='Source: Bureau of Labor Statistics',\n                              font=dict(family='Arial',\n                                        size=12,\n                                        color='rgb(150,150,150)'),\n                              showarrow=False))\n\nfig.update_layout(\n    annotations=annotations,\n    xaxis=dict(\n        showline=True,\n        showgrid=False,\n        showticklabels=True,\n        linecolor='rgb(204, 204, 204)',\n        linewidth=2,\n        ticks='outside',\n#         tickmode = 'array',\n#         tickvals= list(range(2003,2020)),\n        tickfont=dict(\n            family='Arial',\n            size=12,\n            color='rgb(82, 82, 82)',\n        ),\n    ),\n    yaxis=dict(\n        showline=True,\n        showgrid=False,\n        showticklabels=True,\n        linecolor='rgb(204, 204, 204)',\n        linewidth=2,\n        ticks='outside',\n        tickfont=dict(\n            family='Arial',\n            size=12,\n            color='rgb(82, 82, 82)',\n        ),\n    ),\n    autosize=True,\n    margin=dict(\n        autoexpand=True,\n        l=100,\n        r=20,\n        t=50,\n    ),\n    plot_bgcolor='white'\n)\n\nfig.show()\n\n\n                                                \n\n\n\n#hide_input\n\nHTML(fig.to_html(include_plotlyjs='cdn'))\n\n\n\n\n\n                            \n                                            \n\n\n\n\n\n#hide\n\ndf = pd.read_csv('data/states-lau.csv')\n\nnames = ['State', 'U-1', 'U-2', 'U-3', 'U-4', 'U-5', 'U-6']\n\nks_gold ='#F1AD02'\nks_blue ='#002569'\nrowEvenColor = 'lightgrey'\nrowOddColor = 'white'\n\nfig = go.Figure(data=[go.Table(\n    header=dict(values=names,\n                fill_color=ks_blue,\n                font=dict(color=ks_gold, size=12),\n                line_color='grey',\n                align='center'),\n    cells=dict(values=[df.state, df.u1, df.u2, df.u3, df.u4, df.u5, df.u6],\n               fill_color=[[rowOddColor,rowEvenColor]*len(df.state)],\n               line_color='grey',\n               font=dict(color=ks_blue, size=12),\n               align=['left', 'right']))\n])\n\n# fig.update_layout(margin={'r':0,'t':0,'l':0,'b':0})\n\nannotations = []\n\nannotations.append(dict(xref='paper', yref='paper', x=0.5, y=-0.1,\n                              xanchor='center', yanchor='top',\n                              text='Source: Bureau of Labor Statistics',\n                              font=dict(family='Arial',\n                                        size=12,\n                                        color='rgb(150,150,150)'),\n                              showarrow=False))\nfig.update_layout(\n    annotations=annotations, \n    autosize=True,\n    margin=dict(\n        autoexpand=True,\n#         l=100,\n#         r=20,\n        t=20,\n    ),\n)\n\nfig.show()\n\n\n                                                \n\n\n\n#hide_input\n\nHTML(fig.to_html(include_plotlyjs='cdn'))\n\n\n\n\n\n                            \n                                            \n\n\n\n\n\n\nLabor Underutilization for States, Third Quarter of 2019 through Second Quarter of 2020 Averages"
  },
  {
    "objectID": "different-page/h1bvisa.html",
    "href": "different-page/h1bvisa.html",
    "title": "H-1B Visas in Kansas",
    "section": "",
    "text": "Definitions\n\nFiscal Year: The fiscal year in which U.S. Citizenship and Immigration Services (USCIS) first recorded an approval or denial in the electronic systems. USCIS follows the U.S. Federal Government fiscal year (FY) calendar, so data sets presented by fiscal year cover Oct. 1 of one year to Sept. 30 of the next year. The applications and petitions USCIS receives on a given date are generally adjudicated on a later date. Therefore, data reflect the date USCIS adjudicated the application or petition, rather than the date received.\nInitial Approval: H-1B petitions with “new employment” or “new concurrent employment” selected on Part 2, Question 2 of the Form I-129 whose first decision is an approval.\nInitial Denial: H-1B petitions with “new employment” or “new concurrent employment” selected on Part 2, Question 2 of the Form I-129 whose first decision is a denial.\nContinuing Approval: H-1B petitions with anything other than “new employment” or “new concurrent employment” selected on Part 2, Question 2 of the Form I-129, whose first decision is an approval. This includes, for example, continuing employment, change of employer, and amended petitions.\nContinuing Denial: H-1B petitions with anything other than “new employment” or “new concurrent employment” selected on Part 2, Question 2 of the Form I-129 whose first decision is a denial. This includes, for example, continuing employment, change of employer, and amended petitions.\nNAICS: North American Industry Classification System Code, a character string that stands for an industry classification within the North American Industry Classification System.\n\nNote: The data and the above definitions come from the U.S. Citizenship and Immigration Services.\n\n\nTrends in H-1B Approvals in Kansas, FY 2009-2019\nThe metrics in the graph below come from the following calculations:\n\\[\\text{Total Approvals} = \\text{Initial Approvals} + \\text{Continuing Approvals}\\]\n\\[\\text{Total Petitions} = \\text{Initial Approvals} + \\text{Continuing Approvals} + \\text{Initial Denials} + \\text{Continuing Denials}\\]\n\n\n\n                                                \n\n\n\n\nTotal H-1B Approvals in FY 2019, by County\nHover your mouse over a county to reveals the county’s name, the number of initial approvals, and the number of continuing approvals. The coloring on the map is based on the total approvals, which is the sum of intial approvals and continuing approvals.\n\n\n\n                                                \n\n\n\n\nInitial and Continuing H-1B Approvals in Fiscal Year 2019, by Industry (Top 5)"
  },
  {
    "objectID": "different-page/2020-10-28-h1b-visa-analysis.html",
    "href": "different-page/2020-10-28-h1b-visa-analysis.html",
    "title": "H-1B Visas in Kansas",
    "section": "",
    "text": "Select measures of H-1B activity in Kansas.\n\n\ntoc: true\nauthor: Nigel Soria\nbadges: true\ncategories: [immigration, seasonal, migrant workers, H-1B]\npermalink: /h-1b/\nimage: images/h1b-bar.png\n\n\nDefinitions\n\nFiscal Year: The fiscal year in which U.S. Citizenship and Immigration Services (USCIS) first recorded an approval or denial in the electronic systems. USCIS follows the U.S. Federal Government fiscal year (FY) calendar, so data sets presented by fiscal year cover Oct. 1 of one year to Sept. 30 of the next year. The applications and petitions USCIS receives on a given date are generally adjudicated on a later date. Therefore, data reflect the date USCIS adjudicated the application or petition, rather than the date received.\nInitial Approval: H-1B petitions with “new employment” or “new concurrent employment” selected on Part 2, Question 2 of the Form I-129 whose first decision is an approval.\nInitial Denial: H-1B petitions with “new employment” or “new concurrent employment” selected on Part 2, Question 2 of the Form I-129 whose first decision is a denial.\nContinuing Approval: H-1B petitions with anything other than “new employment” or “new concurrent employment” selected on Part 2, Question 2 of the Form I-129, whose first decision is an approval. This includes, for example, continuing employment, change of employer, and amended petitions.\nContinuing Denial: H-1B petitions with anything other than “new employment” or “new concurrent employment” selected on Part 2, Question 2 of the Form I-129 whose first decision is a denial. This includes, for example, continuing employment, change of employer, and amended petitions.\nNAICS: North American Industry Classification System Code, a character string that stands for an industry classification within the North American Industry Classification System.\n\nNote: The data and the above definitions come from the U.S. Citizenship and Immigration Services.\n\n#hide\n\nimport boto3\nimport dask\nimport dask.dataframe as dd\nimport dask.bag as db\nfrom dask.delayed import delayed\nimport datetime as dt\nimport json\nimport matplotlib as mpl\nimport numpy as np\nimport os\nimport pandas as pd\nfrom pathlib import Path\nimport plotly.graph_objects as go\nfrom urllib.request import urlopen\nfrom IPython.display import Image\nfrom IPython.display import HTML\nimport time\n\n\n#hide\n\n# file_path = '../data/uscis/h1b_datahubexport-*.csv'\n# url = 'https://www.uscis.gov/sites/default/files/document/data/h1b_datahubexport-*.csv'\n\n# df = dd.read_csv(file_path, dtype=str)\n\n# df = df[df['State']=='KS']\n\n# convert_dict = {\n#     'Initial Approvals': int, 'Initial Denials': int, \n#     'Continuing Approvals': int, 'Continuing Denials': int,\n#     'NAICS': str, 'ZIP': str\n# }\n# df = df.astype(convert_dict)\n\n# df = df.compute()\n\n# df['total_approvals'] = df['Initial Approvals'] + df['Continuing Approvals']\n# df['total_denials'] = df['Initial Denials'] + df['Continuing Denials']\n# df['total_petitions'] = df['total_approvals'] + df['total_denials']\n\n# naics = pd.read_csv('../data/uscis/naics-list.csv', dtype=str)\n# df = pd.merge(df, naics, how='left', left_on='NAICS', right_on='sector')\n\n# zips = pd.read_csv('../data/uscis/us-zips.csv', dtype=str)\n# df = pd.merge(df, zips[['zip', 'county_name', 'county_fips']], how='left', left_on='ZIP', right_on='zip')\n\n# columns = [\n#     'Fiscal Year', 'Employer', 'Initial Approvals', \n#     'Initial Denials', 'Continuing Approvals', 'Continuing Denials', \n#     'total_approvals', 'total_denials', 'total_petitions',\n#     'sector', 'description', 'State', 'zip', 'county_name', 'county_fips'\n# ]\n\n# names = [\n#     'fiscal_year', 'employer', 'initial_approvals', \n#     'initial_denials', 'continuing_approvals', 'continuing_denials', \n#     'total_approvals', 'total_denials', 'total_petitions',\n#     'sector', 'description', 'state', 'zip', 'county_name', 'county_fips'\n# ]\n\n# name_dict = {columns[i]: names[i] for i in range(len(columns))} \n\n# df = df[columns]\n# df.rename(columns = name_dict, inplace = True) \n\n# df.to_csv('../data/uscis/ks-h1b-data.csv', index=False)\n\ndf = pd.read_csv('data/ks-h1b-data.csv', dtype=str)\n\nconvert_dict = {\n    'initial_approvals': int, 'initial_denials': int, \n    'continuing_approvals': int, 'continuing_denials': int,\n    'total_approvals': int, 'total_denials': int, 'total_petitions': int,\n    'sector': str, 'zip': str\n}\ndf = df.astype(convert_dict)\n\n\n#hide\n\nks_gold ='#F1AD02'\nks_blue ='#002569'\nn=500\n\ndef color_scale(c1, c2, n): #fade (linear interpolate) from color c1 (at mix=0) to c2 (mix=1)\n    colors = []\n    c1 = np.array(mpl.colors.to_rgb(c1))\n    c2 = np.array(mpl.colors.to_rgb(c2))\n\n    for x in range(n+1):\n        color = mpl.colors.to_hex((1-x/n)*c1 + x/n*c2)\n        colors.append(color)\n\n    return colors\n\n\n\nTrends in H-1B Approvals in Kansas, FY 2009-2019\nThe metrics in the graph below come from the following calculations:\n\\[\\begin{align}\n\\text{Total Approvals} &= \\text{Initial Approvals} + \\text{Continuing Approvals} \\\\\n\\text{Total Petitions} &= \\text{Initial Approvals} + \\text{Continuing Approvals} + \\text{Initial Denials} + \\text{Continuing Denials}\n\\end{align}\\]\n\n#hide\n\ndf_line_bar = df.groupby('fiscal_year').agg({'total_approvals':'sum', 'total_petitions':'sum'}).reset_index()\n\nfig = go.Figure()\n\nfig.add_trace(\n    go.Scatter(\n        x = df_line_bar['fiscal_year'],\n        y = df_line_bar['total_approvals'],\n        marker_color = 'rgb(241, 173, 2)',\n        name = 'Total Approvals',\n        yaxis = 'y'\n    ),\n)\n\nfig.add_trace(\n    go.Bar(\n        x = df_line_bar['fiscal_year'],\n        y = df_line_bar['total_petitions'],\n        marker_color = 'rgb(0, 37, 105)',\n        name = 'Total Petitions',\n        yaxis = 'y'\n    ),\n)\n\nfig.update_layout(\n#     title={\n#         'text': '&lt;b&gt;Trends in H-1B Approvals in Kansas, FY 2009-2019&lt;/b&gt;',\n#         'y':0.9,\n#         'x':0.5,\n#         'xanchor': 'center',\n#         'yanchor': 'top'\n#     },\n    xaxis=dict(\n        showline=True,\n        showgrid=False,\n        zeroline=True,\n        showticklabels=True,\n        linecolor='rgb(0, 0, 0)',\n        dtick=1.0,\n        tickfont=dict(\n            family='Arial',\n            size=12,\n            color='rgb(82, 82, 82)',\n        ),\n    ),\n    yaxis=dict(\n#         title={\n#             'text': '&lt;b&gt;Total Approvals&lt;/b&gt;',\n#             'font': {'color': 'rgb(241, 173, 2)'\n#             }\n#         },\n        showgrid=True,\n        zeroline=True,\n        showline=True,\n        linecolor='rgb(0, 0, 0)',\n        overlaying='y2',\n        gridcolor='rgb(200, 200, 200)',\n        rangemode='tozero',\n#         range=[0,70000],\n        anchor='x',\n        separatethousands = True,\n        side='left'\n    ),\n    yaxis2=dict(\n#         title={\n#             'text': '&lt;b&gt;Total Petitions&lt;/b&gt;',\n#             'font': {'color': 'rgb(0, 37, 105)'\n#             }\n#         },\n        zeroline=True,\n        showline=True,\n        linecolor='rgb(0, 0, 0)',\n        side='right',\n        rangemode = 'tozero',\n#         range=[0,140000],\n        anchor='x',\n        separatethousands = True,\n    ),\n    xaxis_tickangle=-45,\n    showlegend=True,\n    plot_bgcolor='white',\n)\n\nfig.show()\n\n\n\n        \n        \n            \n            \n        \n\n\n\n#hide_input\n\nHTML(fig.to_html(include_plotlyjs='cdn'))\n\n\n\n\n\n    \n        \n                \n            \n            \n            \n        \n\n\n\n\n\n\nTotal H-1B Approvals in FY 2019, by County\nHover your mouse over a county to reveals the county’s name, the number of initial approvals, and the number of continuing approvals. The coloring on the map is based on the total approvals, which is the sum of intial approvals and continuing approvals.\n\n#hide\n\nwith urlopen('https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json') as response:\n        counties = json.load(response)\n\ndf_map = df.groupby(['county_name', 'county_fips']).agg({\n    'initial_approvals':'sum', 'continuing_approvals':'sum', 'total_approvals':'sum'\n}).reset_index()\n\ncolors = color_scale(ks_gold, ks_blue, n)\n\nfig = go.Figure(go.Choroplethmapbox(geojson=counties, locations=df_map['county_fips'], z=df_map['total_approvals'].astype(str),\n                                    colorscale=colors, zmin=df_map['total_approvals'].min(), zmax=df_map['total_approvals'].max(),\n                                   marker_opacity=0.5, marker_line_width=0,\n                                   text= df_map['county_name'].str.capitalize() + ' County'\n                                   '&lt;br&gt;Initial Approvals: ' + df_map['initial_approvals'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str) +\n                                   '&lt;br&gt;Continuing Approvals: ' + df_map['continuing_approvals'].astype(int).map(lambda x: '{:,}'.format(x)).astype(str),\n                                   hoverinfo='text',\n                                   colorbar={'title':'Total Approvals', 'separatethousands':True}\n                                   ))\nfig.update_layout(mapbox_style=\"carto-positron\",\n                  mapbox_zoom=6, mapbox_center = {\"lat\": 38.863379, \"lon\": -98.234060})\nfig.update_layout(margin={\"r\":0,\"t\":0,\"l\":0,\"b\":0})\n# fig.update_layout(legend_title='&lt;b&gt; Total Approvals &lt;/b&gt;')\n# fig.update_layout(\n#     title={\n#     'text': '&lt;b&gt;COVID-19 Cases by County&lt;/b&gt;',\n#     'y':0.95,\n#     'x':0.5,\n#     'xanchor': 'center',\n#     'yanchor': 'top'\n#     },\n# )\n\nfig.show()\n\n\n\n        \n        \n            \n            \n        \n\n\n\n#hide_input\n\nHTML(fig.to_html(include_plotlyjs='cdn'))\n\n\n\n\n\n    \n        \n                \n            \n            \n            \n        \n\n\n\n\n\n\nInitial and Continuing H-1B Approvals in Fiscal Year 2019, by Industry (Top 5)\n\n#hide\n\ndf_ind = df[df['fiscal_year']=='2019']\ndf_ind = df_ind.groupby('description').agg({'initial_approvals':'sum', 'continuing_approvals':'sum'}).reset_index()\ndf_ind['total_approvals'] = df_ind['initial_approvals'] + df_ind['continuing_approvals']\ndf_ind = df_ind[df_ind['total_approvals']&gt;=100]\n\nfig = go.Figure()\n\nfig.add_trace(go.Bar(\n    x = df_ind['initial_approvals'],\n    y = df_ind['description'],\n    name='Initial Approvals',\n    orientation='h',\n    marker=dict(\n        color='rgba(20,37,105, 0.6)',\n        line=dict(color='rgba(0,37,105, 1.0)', width=3)\n    )\n))\nfig.add_trace(go.Bar(\n    x = df_ind['continuing_approvals'],\n    y = df_ind['description'],\n    name='Continuing Approvals',\n    orientation='h',\n    marker=dict(\n        color='rgba(241, 173, 2, 0.6)',\n        line=dict(color='rgba(241, 173, 2, 1.0)', width=3)\n    )\n))\n\nfig.update_yaxes(\n    showgrid=True,\n    zeroline=True,\n    showline=True,\n#     dtick=1,\n    linecolor='rgb(0, 0, 0)'\n)\nfig.update_xaxes(\n    showgrid=True,\n    zeroline=True,\n#     tickformat=',.0%',\n    showline=True,\n#     range=[0,.25],\n#     dtick=.05,\n    linecolor='rgb(0, 0, 0)')\n\nfig.update_layout(\n#     title={\n#     'text': '&lt;b&gt;Initial and Continuing H-1B Approvals in Fiscal Year 2019, by Industry (Top 5)&lt;/b&gt;',\n#     'y':0.95,\n#     'x':0.5,\n#     'xanchor': 'center',\n#     'yanchor': 'top'\n#     },\n    yaxis={'categoryorder':'total ascending'},\n    plot_bgcolor='white',\n    barmode='stack'\n)\n\nfig.show()\n# fig.write_image('h1b-bar.png')\n\n\n\n        \n        \n            \n            \n        \n\n\n\n#hide_input\n\nHTML(fig.to_html(include_plotlyjs='cdn'))"
  }
]